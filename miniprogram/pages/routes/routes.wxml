<!-- æ¨èè·¯çº¿é¡µ -->
<view class="page-routes">
  <view class="page-header">
    <text class="header-icon">ğŸ—ºï¸</text>
    <text class="header-title">æ¨èæ¸¸è§ˆè·¯çº¿</text>
    <text class="header-subtitle">ç²¾å¿ƒè§„åˆ’ï¼Œç•…æ¸¸å—é”£é¼“å··</text>
  </view>

  <!-- è·¯çº¿åˆ—è¡¨ -->
  <view class="route-list" wx:if="{{routes.length > 0}}">
    <view class="route-card" wx:for="{{routes}}" wx:key="id">
      <view class="route-header">
        <text class="route-name">{{item.name}}</text>
        <view class="route-meta">
          <text class="meta-item">â±ï¸ {{item.duration}}</text>
          <text class="meta-item">ğŸ“ {{item.distance}}</text>
          <text class="meta-item">ğŸ“ {{item.poi_count}}ä¸ªæ™¯ç‚¹</text>
        </view>
      </view>
      <text class="route-desc">{{item.description}}</text>
      <button class="btn-detail" bindtap="toggleRoute" data-id="{{item.id}}">
        {{expandedRoute === item.id ? 'æ”¶èµ·è¯¦æƒ…' : 'æŸ¥çœ‹è¯¦æƒ…'}}
      </button>

      <!-- è·¯çº¿è¯¦æƒ… -->
      <view class="route-detail" wx:if="{{expandedRoute === item.id && routeDetail}}">
        <view class="timeline">
          <view 
            class="timeline-item" 
            wx:for="{{routeDetail.pois}}" 
            wx:for-item="poi" 
            wx:key="order"
            bindtap="goToDetail"
            data-id="{{poi.poi.id}}"
          >
            <view class="timeline-dot">{{poi.order}}</view>
            <view class="timeline-content">
              <view class="timeline-header">
                <text class="timeline-name">{{poi.poi.name}}</text>
                <view class="timeline-type {{getTagClass(poi.poi.type)}}">{{poi.poi.type_display}}</view>
              </view>
              <text class="timeline-brief">{{poi.poi.brief}}</text>
            </view>
            <text class="timeline-arrow">â€º</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:else>
    <text class="empty-icon">ğŸ—ºï¸</text>
    <text>æš‚æ— æ¨èè·¯çº¿</text>
  </view>
</view>
