# 南锣鼓巷旅游导览系统 - 项目报告

## 一、数据库/数据结构实现

### 1.1 数据库选型

本项目采用 **SQLite** 作为数据库，主要考虑因素：
- 轻量级，无需额外安装数据库服务
- 与 Django ORM 完美集成
- 适合中小型项目，便于开发和部署
- 数据以单文件形式存储，便于备份和迁移

### 1.2 数据表设计

系统共设计 4 张核心数据表：

| 表名 | 说明 | 记录数 |
|------|------|--------|
| Hutong | 胡同基本信息 | 1 |
| POI | 兴趣点（景点）信息 | 10 |
| Route | 推荐游览路线 | 2 |
| RoutePOI | 路线与景点关联 | 8 |

### 1.3 ER 图（实体关系图）


```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              ER 实体关系图                                   │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────┐         1:N         ┌─────────────┐
    │   Hutong    │─────────────────────│     POI     │
    │   (胡同)    │                     │   (景点)    │
    └─────────────┘                     └─────────────┘
          │                                    │
          │ 1:N                                │
          │                                    │
          ▼                                    │
    ┌─────────────┐                           │
    │    Route    │                           │
    │   (路线)    │                           │
    └─────────────┘                           │
          │                                    │
          │ 1:N                          N:1   │
          │                                    │
          ▼                                    ▼
    ┌─────────────────────────────────────────────┐
    │                  RoutePOI                    │
    │              (路线-景点关联)                  │
    └─────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│  Hutong (胡同表)                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  PK  id            INT          主键                                        │
│      name          VARCHAR(100) 胡同名称                                    │
│      description   TEXT         详细介绍                                    │
│      location      VARCHAR(200) 地理位置                                    │
│      history       TEXT         历史沿革                                    │
│      features      JSON         特色标签                                    │
│      image         VARCHAR(500) 封面图片                                    │
│      created_at    DATETIME     创建时间                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  POI (景点表)                                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│  PK  id            INT          主键                                        │
│  FK  hutong_id     INT          所属胡同                                    │
│      name          VARCHAR(100) 景点名称                                    │
│      type          VARCHAR(20)  景点类型                                    │
│      description   TEXT         详细介绍                                    │
│      brief         VARCHAR(200) 简短描述                                    │
│      location      VARCHAR(200) 具体位置                                    │
│      coordinates   JSON         经纬度坐标                                  │
│      images        JSON         图片列表                                    │
│      opening_hours VARCHAR(100) 开放时间                                    │
│      tips          VARCHAR(200) 游览提示                                    │
│      order         INT          排序权重                                    │
│      created_at    DATETIME     创建时间                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  Route (路线表)                                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│  PK  id            INT          主键                                        │
│  FK  hutong_id     INT          所属胡同                                    │
│      name          VARCHAR(100) 路线名称                                    │
│      description   TEXT         路线介绍                                    │
│      duration      VARCHAR(50)  预计时间                                    │
│      distance      VARCHAR(50)  路线长度                                    │
│      created_at    DATETIME     创建时间                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  RoutePOI (路线景点关联表)                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  PK  id            INT          主键                                        │
│  FK  route_id      INT          所属路线                                    │
│  FK  poi_id        INT          关联景点                                    │
│      order         INT          游览顺序                                    │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.4 POI 类型分布

```
POI类型分布统计（共10个景点）

名人故居  ████████████████████  2个 (20%)
历史古迹  ██████████████████████████████  3个 (30%)
美食餐饮  ████████████████████  2个 (20%)
特色店铺  ██████████  1个 (10%)
文化场所  ████████████████████  2个 (20%)
```


### 1.5 数据表详细说明

#### 1.5.1 Hutong（胡同表）

存储胡同的基本信息，本项目仅包含南锣鼓巷一条胡同。

```python
class Hutong(models.Model):
    name = models.CharField(max_length=100)        # 胡同名称
    description = models.TextField()                # 详细介绍
    location = models.CharField(max_length=200)     # 地理位置
    history = models.TextField()                    # 历史沿革
    features = models.JSONField(default=list)       # 特色标签
    image = models.CharField(max_length=500)        # 封面图片URL
    created_at = models.DateTimeField(auto_now_add=True)
```

#### 1.5.2 POI（兴趣点表）

存储胡同内的景点、店铺、历史建筑等兴趣点信息。

```python
class POI(models.Model):
    TYPE_CHOICES = [
        ('historic', '历史古迹'),
        ('celebrity', '名人故居'),
        ('shop', '特色店铺'),
        ('food', '美食餐饮'),
        ('culture', '文化场所'),
    ]
    
    hutong = models.ForeignKey(Hutong, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    type = models.CharField(max_length=20, choices=TYPE_CHOICES)
    description = models.TextField()
    brief = models.CharField(max_length=200)
    location = models.CharField(max_length=200)
    coordinates = models.JSONField(null=True)
    images = models.JSONField(default=list)
    opening_hours = models.CharField(max_length=100, blank=True)
    tips = models.CharField(max_length=200, blank=True)
    order = models.IntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)
```

---

## 二、胡同概览模块

### 2.1 模块功能

胡同概览模块是系统的首页，主要功能包括：

1. **展示胡同基本信息** - 名称、地理位置
2. **展示特色标签** - 历史文化、名人故居、特色小店等
3. **展示胡同简介** - 详细的文字介绍
4. **展示历史沿革** - 胡同的历史背景
5. **提供导航入口** - 快速跳转到景点列表和推荐路线


### 2.2 系统架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              系统架构图                                      │
└─────────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────────────────────────┐
                    │           用户访问               │
                    └─────────────────────────────────┘
                                    │
                    ┌───────────────┴───────────────┐
                    │                               │
                    ▼                               ▼
        ┌───────────────────┐           ┌───────────────────┐
        │    Web 前端        │           │   微信小程序       │
        │  Vue3 + Vite      │           │   原生开发         │
        │  Element Plus     │           │                   │
        └───────────────────┘           └───────────────────┘
                    │                               │
                    └───────────────┬───────────────┘
                                    │
                                    ▼
                    ┌─────────────────────────────────┐
                    │         HTTP / JSON             │
                    └─────────────────────────────────┘
                                    │
                                    ▼
                    ┌─────────────────────────────────┐
                    │       Django REST Framework     │
                    │         RESTful API             │
                    │                                 │
                    │  /api/hutong/   胡同信息        │
                    │  /api/pois/     景点列表        │
                    │  /api/routes/   推荐路线        │
                    │  /api/search/   搜索功能        │
                    └─────────────────────────────────┘
                                    │
                                    ▼
                    ┌─────────────────────────────────┐
                    │          Django ORM             │
                    └─────────────────────────────────┘
                                    │
                                    ▼
                    ┌─────────────────────────────────┐
                    │       SQLite 数据库             │
                    │                                 │
                    │  ┌─────────┐  ┌─────────┐      │
                    │  │ Hutong  │  │   POI   │      │
                    │  └─────────┘  └─────────┘      │
                    │  ┌─────────┐  ┌─────────┐      │
                    │  │  Route  │  │RoutePOI │      │
                    │  └─────────┘  └─────────┘      │
                    └─────────────────────────────────┘
```

### 2.3 API 接口设计

**接口地址：** `GET /api/hutong/`

**响应示例：**
```json
{
    "id": 1,
    "name": "南锣鼓巷",
    "description": "南锣鼓巷是北京最古老的街区之一...",
    "location": "北京市东城区南锣鼓巷",
    "history": "南锣鼓巷始建于元代...",
    "features": ["历史文化", "名人故居", "特色小店"],
    "image": "/images/nanluoguxiang.jpg",
    "created_at": "2024-01-01T00:00:00Z"
}
```


### 2.4 页面流程图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            首页访问流程图                                    │
└─────────────────────────────────────────────────────────────────────────────┘

                        ┌─────────────────┐
                        │   用户访问首页   │
                        └────────┬────────┘
                                 │
                                 ▼
                        ┌─────────────────┐
                        │  调用 API 接口   │
                        │ GET /api/hutong/│
                        └────────┬────────┘
                                 │
                    ┌────────────┴────────────┐
                    │                         │
                    ▼                         ▼
           ┌───────────────┐         ┌───────────────┐
           │   加载成功     │         │   加载失败     │
           └───────┬───────┘         └───────┬───────┘
                   │                         │
                   ▼                         ▼
           ┌───────────────┐         ┌───────────────┐
           │  渲染页面内容  │         │  显示错误提示  │
           └───────┬───────┘         └───────────────┘
                   │
     ┌─────────────┼─────────────┬─────────────┐
     │             │             │             │
     ▼             ▼             ▼             ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│基本信息 │ │特色标签 │ │胡同简介 │ │历史沿革 │
└─────────┘ └─────────┘ └─────────┘ └─────────┘
                   │
                   ▼
           ┌───────────────┐
           │   导航按钮     │
           └───────┬───────┘
                   │
         ┌─────────┴─────────┐
         │                   │
         ▼                   ▼
  ┌─────────────┐     ┌─────────────┐
  │ 跳转景点列表 │     │ 跳转推荐路线 │
  │  /pois      │     │  /routes    │
  └─────────────┘     └─────────────┘
```


### 2.5 界面设计

#### 2.5.1 Web 端首页布局

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              顶部导航栏                                      │
│  🏮 南锣鼓巷导览           [首页]  [景点]  [路线]                   🔍       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                    ╔═══════════════════════════════════╗                    │
│                    ║                                   ║                    │
│                    ║            🏮                     ║                    │
│                    ║          南锣鼓巷                 ║    Hero 区域       │
│                    ║   北京最具特色的历史文化街区       ║   (渐变红色背景)   │
│                    ║                                   ║                    │
│                    ║  [历史文化] [名人故居] [特色小店]  ║                    │
│                    ║                                   ║                    │
│                    ╚═══════════════════════════════════╝                    │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│      ┌─────────────────────────┐      ┌─────────────────────────┐          │
│      │                         │      │                         │          │
│      │      🏠 景点列表         │      │      🗺️ 推荐路线         │          │
│      │        10个景点         │      │        2条路线          │   快捷   │
│      │                         │      │                         │   入口   │
│      └─────────────────────────┘      └─────────────────────────┘          │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │  📍 地理位置                                                          │  │
│  │                                                                       │  │
│  │  北京市东城区南锣鼓巷                                                  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │  📖 胡同简介                                                          │  │
│  │                                                                       │  │
│  │  南锣鼓巷是北京最古老的街区之一，位于北京市东城区，是北京最具特色的    │  │
│  │  胡同之一。这条胡同北起鼓楼东大街，南至平安大街，全长787米，宽8米，   │  │
│  │  与元大都同期建成，至今已有740多年的历史。                             │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │  🏛️ 历史沿革                                                          │  │
│  │                                                                       │  │
│  │  南锣鼓巷始建于元代，是元大都的一部分。明清时期，这里是达官贵人聚居   │  │
│  │  之地，留下了众多名人故居和历史遗迹。近年来，南锣鼓巷经过改造，成为   │  │
│  │  集文化、旅游、休闲于一体的特色街区。                                  │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                         © 2024 南锣鼓巷旅游导览系统                          │
└─────────────────────────────────────────────────────────────────────────────┘
```


#### 2.5.2 小程序端首页布局

```
┌───────────────────────────┐
│        状态栏              │
├───────────────────────────┤
│        南锣鼓巷            │  导航栏
├───────────────────────────┤
│                           │
│          🏮               │
│                           │
│        南锣鼓巷            │  Hero
│                           │  区域
│  北京最具特色的历史文化街区 │
│                           │
├───────────────────────────┤
│                           │
│ [历史文化] [名人故居]      │  特色
│ [特色小店] [文艺气息]      │  标签
│                           │
├───────────────────────────┤
│                           │
│  ┌─────────┐ ┌─────────┐  │
│  │  🏠     │ │  🗺️     │  │  快捷
│  │ 景点列表 │ │ 推荐路线 │  │  入口
│  │ 10个景点 │ │ 2条路线  │  │
│  └─────────┘ └─────────┘  │
│                           │
├───────────────────────────┤
│ ┌───────────────────────┐ │
│ │ 📍 地理位置            │ │
│ │ 北京市东城区南锣鼓巷   │ │  信息
│ └───────────────────────┘ │  卡片
├───────────────────────────┤
│ ┌───────────────────────┐ │
│ │ 📖 胡同简介            │ │
│ │ 南锣鼓巷是北京最古老   │ │
│ │ 的街区之一...          │ │
│ └───────────────────────┘ │
├───────────────────────────┤
│ ┌───────────────────────┐ │
│ │ 🏛️ 历史沿革            │ │
│ │ 南锣鼓巷始建于元代...  │ │
│ └───────────────────────┘ │
├───────────────────────────┤
│                           │
│  [首页]   [景点]   [路线]  │  TabBar
│                           │
└───────────────────────────┘
```


### 2.6 南锣鼓巷特色展示

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         南锣鼓巷特色思维导图                                 │
└─────────────────────────────────────────────────────────────────────────────┘

                                 ┌─────────────┐
                                 │  南锣鼓巷   │
                                 └──────┬──────┘
                                        │
          ┌─────────────┬───────────────┼───────────────┬─────────────┐
          │             │               │               │             │
          ▼             ▼               ▼               ▼             ▼
    ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐
    │ 历史文化  │ │ 名人故居  │ │ 特色小店  │ │ 文艺气息  │ │ 胡同风情  │
    └─────┬─────┘ └─────┬─────┘ └─────┬─────┘ └─────┬─────┘ └─────┬─────┘
          │             │             │             │             │
    ┌─────┴─────┐ ┌─────┴─────┐ ┌─────┴─────┐ ┌─────┴─────┐ ┌─────┴─────┐
    │ 元代胡同  │ │ 茅盾故居  │ │ 文创店铺  │ │ 独立剧场  │ │  四合院   │
    │ 明清建筑  │ │齐白石旧居 │ │ 手工艺品  │ │ 艺术展览  │ │ 青砖灰瓦  │
    └───────────┘ └───────────┘ └───────────┘ └───────────┘ └───────────┘
```

### 2.7 数据展示

#### 南锣鼓巷基本信息

| 属性 | 内容 |
|------|------|
| 名称 | 南锣鼓巷 |
| 位置 | 北京市东城区南锣鼓巷 |
| 全长 | 787米 |
| 宽度 | 8米 |
| 历史 | 始建于元代，已有740多年历史 |

#### 收录景点列表

| 序号 | 名称 | 类型 | 位置 |
|------|------|------|------|
| 1 | 茅盾故居 | 名人故居 | 后圆恩寺胡同13号 |
| 2 | 齐白石旧居纪念馆 | 名人故居 | 雨儿胡同13号 |
| 3 | 僧格林沁王府 | 历史古迹 | 炒豆胡同77号 |
| 4 | 文宇奶酪店 | 美食餐饮 | 南锣鼓巷49号 |
| 5 | 创可贴8 | 特色店铺 | 南锣鼓巷61号 |
| 6 | 蓬蒿剧场 | 文化场所 | 东棉花胡同35号 |
| 7 | 过客酒吧 | 美食餐饮 | 南锣鼓巷108号 |
| 8 | 中央戏剧学院 | 文化场所 | 东棉花胡同39号 |
| 9 | 吉祥胡同 | 历史古迹 | 吉祥胡同 |
| 10 | 黑芝麻胡同 | 历史古迹 | 黑芝麻胡同 |


#### 推荐路线

**路线一：经典文化游**
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  路线名称：经典文化游                                                        │
│  预计时间：约2小时                                                           │
│  路线长度：约1.5公里                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│    ①茅盾故居  ──────►  ②齐白石旧居  ──────►  ③僧格林沁王府  ──────►  ④中央戏剧学院  │
│                                                                             │
│    探访名人故居，感受深厚的文化底蕴                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

**路线二：休闲美食游**
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  路线名称：休闲美食游                                                        │
│  预计时间：约1.5小时                                                         │
│  路线长度：约1公里                                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│    ①文宇奶酪店  ──────►  ②创可贴8  ──────►  ③过客酒吧  ──────►  ④蓬蒿剧场    │
│                                                                             │
│    品尝特色小吃，逛逛有趣的文创小店                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 三、技术总结

### 3.1 技术栈

| 层级 | 技术 | 版本 | 说明 |
|------|------|------|------|
| 后端框架 | Django | 4.x | Python Web框架 |
| API框架 | Django REST Framework | 3.x | RESTful API |
| 数据库 | SQLite | 3.x | 轻量级数据库 |
| 前端框架 | Vue | 3.x | 渐进式JS框架 |
| 构建工具 | Vite | 4.x | 前端构建工具 |
| UI组件库 | Element Plus | 2.x | Vue3组件库 |
| 小程序 | 微信原生 | - | 微信小程序 |

### 3.2 项目亮点

1. **前后端分离架构** - 便于维护和扩展
2. **RESTful API设计** - 接口规范统一
3. **多端适配** - 同时支持Web和小程序
4. **响应式设计** - 适配不同屏幕尺寸
5. **数据驱动** - 所有内容从数据库动态获取

### 3.3 项目结构

```
nanluoguxiang-tourism/
├── backend/                # Django后端
│   ├── config/            # 项目配置
│   ├── tourism/           # 主应用
│   │   ├── models.py      # 数据模型
│   │   ├── views.py       # 视图
│   │   ├── serializers.py # 序列化器
│   │   └── urls.py        # 路由
│   └── requirements.txt   # 依赖
├── frontend/              # Vue3前端
│   ├── src/
│   │   ├── api/          # API封装
│   │   ├── components/   # 组件
│   │   ├── views/        # 页面
│   │   └── router/       # 路由
│   └── package.json
├── miniprogram/           # 微信小程序
│   ├── pages/            # 页面
│   ├── app.js            # 入口
│   └── app.json          # 配置
└── docs/                  # 文档
```

---

**报告完成日期：** 2026年

**项目成员：** 郭琼鹏 汪凯艳
