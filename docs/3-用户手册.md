# 南锣鼓巷旅游导览系统 - 用户手册

## 一、安装与访问

### 1.1 环境要求

| 项目 | 要求 |
|------|------|
| 操作系统 | Windows 10/11 |
| Python | 3.8 及以上 |
| Node.js | 16.x |
| 浏览器 | Chrome、Edge、Firefox |

### 1.2 后端启动

```bash
# 1. 进入后端目录
cd backend

# 2. 启动Django服务（使用虚拟环境中的Python）
.\venv\Scripts\python.exe manage.py runserver

# 3. 服务启动成功后显示
Starting development server at http://127.0.0.1:8000/
```

### 1.3 前端启动

```bash
# 1. 进入前端目录
cd frontend

# 2. 安装依赖（首次运行）
npm install

# 3. 启动开发服务器
npm run dev

# 4. 服务启动成功后显示
Local: http://127.0.0.1:3000/
```

### 1.4 访问地址

| 功能 | 地址 |
|------|------|
| Web前端 | http://127.0.0.1:3000 |
| 后端API | http://127.0.0.1:8000/api/ |
| 后台管理 | http://127.0.0.1:8000/admin/ |
| 管理员账号 | admin / admin123 |

### 1.5 小程序运行

1. 打开微信开发者工具
2. 导入项目，选择 `miniprogram` 目录
3. 修改 `app.js` 中的 `BASE_URL` 为后端地址
4. 点击"编译"预览小程序

---

## 二、主要功能说明

### 2.1 首页

首页展示南锣鼓巷的基本信息，包括历史介绍、地理位置、全长等。页面下方提供"景点列表"和"推荐路线"两个快捷入口。

**操作方式：**
- 点击顶部导航栏切换页面
- 点击快捷入口卡片进入对应功能

### 2.2 景点浏览

景点列表以卡片形式展示所有景点，每个卡片包含图片、名称、类型标签和简介。

**操作方式：**
- 在搜索框输入关键词，按回车或点击🔍搜索
- 点击清除按钮恢复全部景点
- 点击任意景点卡片查看详情

**景点类型说明：**
| 类型 | 标签颜色 | 说明 |
|------|----------|------|
| 名人故居 | 橙色 | 历史名人曾居住的地方 |
| 历史建筑 | 红色 | 具有历史价值的建筑 |
| 特色美食 | 绿色 | 当地特色餐饮店铺 |
| 文创小店 | 蓝色 | 文化创意商店 |
| 文化场所 | 紫色 | 文化展示场所 |

### 2.3 景点详情

详情页展示景点的完整信息，包括图片轮播、详细介绍、开放时间、游览提示等。

**操作方式：**
- 左右滑动或点击指示器切换图片
- 点击图片可预览大图（小程序）
- 点击"返回列表"返回景点列表

### 2.4 推荐路线

提供两条主题游览路线，展示路线名称、预计时长、总距离和包含景点数量。

**操作方式：**
- 点击"查看详情"展开路线景点列表
- 再次点击收起详情
- 点击路线中的景点可跳转到详情页

**推荐路线：**
| 路线 | 时长 | 距离 | 景点数 |
|------|------|------|--------|
| 经典文化游 | 约2小时 | 约1.5公里 | 4个 |
| 休闲美食游 | 约1.5小时 | 约1公里 | 4个 |

### 2.5 搜索功能

支持按景点名称和描述内容进行中文模糊搜索。

**搜索示例：**
- 搜索"故居"：返回所有名人故居类景点
- 搜索"美食"：返回特色美食相关景点
- 搜索"茅盾"：返回茅盾故居

---

## 三、常见问题

### Q1: 前端页面显示空白或数据加载失败？

**解决方案：**
1. 确认后端服务已启动（访问 http://127.0.0.1:8000/api/pois/ 测试）
2. 检查浏览器控制台是否有跨域错误
3. 确认前端API配置地址正确

### Q2: 后端启动报错"无法加载脚本"？

**解决方案：**
PowerShell执行策略限制，使用以下命令直接运行：
```bash
.\venv\Scripts\python.exe manage.py runserver
```

### Q3: 小程序无法获取数据？

**解决方案：**
1. 检查 `app.js` 中 `BASE_URL` 配置是否正确
2. 确认后端服务已启动
3. 开发者工具中勾选"不校验合法域名"

### Q4: 搜索无结果？

**解决方案：**
- 尝试使用更短的关键词
- 系统支持模糊匹配，无需输入完整名称
- 确认关键词与景点名称或描述相关

### Q5: 图片无法显示？

**解决方案：**
1. 检查图片URL是否正确
2. 确认后端静态文件配置
3. 检查网络连接

### Q6: 如何添加新景点？

**操作步骤：**
1. 访问后台管理 http://127.0.0.1:8000/admin/
2. 使用管理员账号登录
3. 点击"POIs"进入景点管理
4. 点击"添加"填写景点信息
5. 保存后前端自动显示新景点
